version: "2.3" 
services:
  abc-depccg-train:
    build: ./abc-depccg
    image: abc-depccg
    runtime: nvidia # NOTE: version 3 does not support this option!
    volumes:
      - ~/abc-depccg/source:/root/source
      - ~/abc-depccg/result:/root/result
    entrypoint:
      - train
  abc-depccg-parse:
    build: ./abc-depccg
    image: abc-depccg
    runtime: nvidia
    volumes: 
      - ~/abc-depccg/result:/root/result
    stdin_open: true
    tty: true
    entrypoint:
      - parse